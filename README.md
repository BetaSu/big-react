# Big-React

ä»é›¶å®ç° React v18 ğŸ‰ğŸ‰ğŸ‰

æ²¡ä»€ä¹ˆæ¯”è‡ªå·±äº²æ‰‹é€ ä¸ª`React18`æ›´èƒ½åŠ æ·±ç†è§£çš„äº†

## TODO List

### å·¥ç¨‹ç±»éœ€æ±‚

| ç±»å‹ | å†…å®¹                               | å®Œæˆæƒ…å†µ | åœ¨å“ªä¸ªç‰ˆæœ¬å®ç°çš„                                  |
| ---- | ---------------------------------- | -------- | ------------------------------------------------- |
| æ¶æ„ | monorepoï¼ˆpnpm å®ç°ï¼‰              | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| è§„èŒƒ | eslint                             | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| è§„èŒƒ | prettier                           | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| è§„èŒƒ | commitlint + husky                 | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| è§„èŒƒ | lint-staged                        | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| è§„èŒƒ | tsc                                | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| æµ‹è¯• | jest ç¯å¢ƒæ­å»º                      | âœ…       | [v4](https://github.com/BetaSu/big-react/tree/v4) |
| è§„èŒƒ | tsc                                | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| æ„å»º | babel é…ç½®                         | âœ…       | [v4](https://github.com/BetaSu/big-react/tree/v4) |
| æ„å»º | Dev ç¯å¢ƒåŒ…çš„æ„å»º                   | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| æ„å»º | Prod ç¯å¢ƒåŒ…çš„æ„å»º                  | â¬œï¸      |                                                   |
| éƒ¨ç½² | Github Action æ‰§è¡Œ lint ä¸ test    | â¬œï¸      |                                                   |
| éƒ¨ç½² | Github Action æ ¹æ® tag å‘å¸ƒ npm åŒ… | â¬œï¸      |                                                   |

### æ¡†æ¶éœ€æ±‚

å½“å‰è·‘é€š React å®˜æ–¹æµ‹è¯•ç”¨ä¾‹ 17 ä¸ª

| ç±»å‹       | å†…å®¹                        | å®Œæˆæƒ…å†µ | åœ¨å“ªä¸ªç‰ˆæœ¬å®ç°çš„                                  |
| ---------- | --------------------------- | -------- | ------------------------------------------------- |
| React      | JSX è½¬æ¢                    | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| React      | React.isValidElement        | âœ…       | [v4](https://github.com/BetaSu/big-react/tree/v4) |
| ReactDOM   | æµè§ˆå™¨ç¯å¢ƒ DOM çš„æ’å…¥       | âœ…       | [v2](https://github.com/BetaSu/big-react/tree/v2) |
| ReactDOM   | æµè§ˆå™¨ç¯å¢ƒ DOM çš„ç§»åŠ¨       | â¬œï¸      |                                                   |
| ReactDOM   | æµè§ˆå™¨ç¯å¢ƒ DOM çš„å±æ€§å˜åŒ–   | â¬œï¸      |                                                   |
| ReactDOM   | æµè§ˆå™¨ç¯å¢ƒ DOM çš„åˆ é™¤       | â¬œï¸      |                                                   |
| ReactDOM   | ReactTestUtils              | âœ…       | [v4](https://github.com/BetaSu/big-react/tree/v4) |
| ReactNoop  | ReactNoop Renderer          | â¬œï¸      |                                                   |
| Reconciler | Fiber æ¶æ„                  | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| Reconciler | äº‹ä»¶æ¨¡å‹                    | â¬œï¸      |                                                   |
| Reconciler | Lane æ¨¡å‹                   | â¬œï¸      |                                                   |
| Reconciler | åŸºç¡€ Update æœºåˆ¶            | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| Reconciler | å¸¦ä¼˜å…ˆçº§çš„ Update æœºåˆ¶      | â¬œï¸      |                                                   |
| Reconciler | æ’å…¥å•èŠ‚ç‚¹çš„ reconcile æµç¨‹ | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| Reconciler | æ’å…¥å¤šèŠ‚ç‚¹çš„ reconcile æµç¨‹ | â¬œï¸      |                                                   |
| Reconciler | åˆ é™¤èŠ‚ç‚¹çš„ reconcile æµç¨‹   | â¬œï¸      |                                                   |
| Reconciler | HostText ç±»å‹æ”¯æŒ           | âœ…       | [v2](https://github.com/BetaSu/big-react/tree/v2) |
| Reconciler | HostComponent ç±»å‹æ”¯æŒ      | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| Reconciler | HostRoot ç±»å‹æ”¯æŒ           | âœ…       | [v1](https://github.com/BetaSu/big-react/tree/v1) |
| Reconciler | FunctionComponent ç±»å‹æ”¯æŒ  | âœ…       | [v3](https://github.com/BetaSu/big-react/tree/v3) |
| React      | Hooks æ¶æ„ mount æ—¶å®ç°     | âœ…       | [v3](https://github.com/BetaSu/big-react/tree/v3) |
| React      | Hooks æ¶æ„ update æ—¶å®ç°    | â¬œï¸      |                                                   |
| Reconciler | useState å®ç°               | âœ…       | [v3](https://github.com/BetaSu/big-react/tree/v3) |
| Reconciler | useEffect å®ç°              | â¬œï¸      |                                                   |
| Reconciler | useRef å®ç°                 | â¬œï¸      |                                                   |
| Reconciler | åŒæ­¥è°ƒåº¦æµç¨‹                | â¬œï¸      |                                                   |
| Reconciler | å¼‚æ­¥è°ƒåº¦æµç¨‹                | â¬œï¸      |                                                   |

## è°ƒè¯•

ä¸»è¦è°ƒè¯•æ–¹å¼åŒ…æ‹¬ä¸¤ä¸ªï¼š

1. è·‘`React`å®˜æ–¹çš„æµ‹è¯•ç”¨ä¾‹

æ‰§è¡Œ`pnpm test`

2. pnpm link

é€šè¿‡`CRA`æˆ–`Vite`èµ·ä¸€ä¸ª`React`æµ‹è¯•é¡¹ç›®åï¼Œåœ¨æœ¬é¡¹ç›®æ‰§è¡Œ`pnpm run build:dev`æ‰“åŒ…`react`ä¸`react-dom`ï¼Œåœ¨æµ‹è¯•é¡¹ç›®ä¸­é€šè¿‡`pnpm link`å°†é¡¹ç›®ä¾èµ–çš„`react`ä¸`react-dom`æ›¿æ¢ä¸ºæˆ‘ä»¬æ‰“åŒ…çš„`react`ä¸`react-dom`

## æ›´æ–°æ—¥å¿—

### [v4](https://github.com/BetaSu/big-react/tree/v4)

åˆå§‹åŒ–æµ‹è¯•ç›¸å…³æ¶æ„ï¼ŒåŒ…æ‹¬å¦‚ä¸‹åŠŸèƒ½ï¼š

- å®ç° React.isValidElement
- jest ç¯å¢ƒæ­å»º
- babel é…ç½®
- ReactTestUtils
- è·‘é€šå…³äº jsx çš„ 17 ä¸ªå®˜æ–¹ç”¨ä¾‹

### [v3](https://github.com/BetaSu/big-react/tree/v3)

å®ç° useState çš„ mount æ—¶æµç¨‹ï¼ŒåŒ…æ‹¬å¦‚ä¸‹åŠŸèƒ½ï¼š

- FunctionComponent ç±»å‹æ”¯æŒ
- Hooks æ¶æ„ mount æ—¶å®ç°
- useState å®ç°

### [v2](https://github.com/BetaSu/big-react/tree/v2)

æ’å…¥å•èŠ‚ç‚¹çš„ mount æµç¨‹ï¼ˆå¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒæ¸²æŸ“ DOMï¼‰ï¼ŒåŒ…æ‹¬å¦‚ä¸‹åŠŸèƒ½ï¼š

- æµè§ˆå™¨ç¯å¢ƒ DOM çš„æ’å…¥
- HostText ç±»å‹æ”¯æŒ

### [v1](https://github.com/BetaSu/big-react/tree/v1)

æ’å…¥å•èŠ‚ç‚¹çš„ render é˜¶æ®µ mount æµç¨‹ï¼ŒåŒ…æ‹¬å¦‚ä¸‹åŠŸèƒ½ï¼š

- JSX è½¬æ¢
- Fiber æ¶æ„
- æ’å…¥å•èŠ‚ç‚¹çš„ reconcile æµç¨‹
- HostComponent ç±»å‹æ”¯æŒ
- HostRoot ç±»å‹æ”¯æŒ

æ³¨ï¼šè¿˜æœªå®ç°æµè§ˆå™¨ç¯å¢ƒä¸‹çš„æ¸²æŸ“
